{"version":3,"file":"DynamicKeyValueList.js","sourceRoot":"","sources":["../../../../src/components/Configurator/KeywordForm/DynamicKeyValueList.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Add, Delete } from '@mui/icons-material';\nimport {\n  Box,\n  IconButton,\n  TextField,\n  Typography,\n  TextFieldProps,\n} from '@mui/material';\nimport { SimpleFormControlChange } from 'common-types';\n\nimport {\n  filterOutWithId,\n  updateItemWithMatchingId,\n  findById,\n} from 'common-utils';\nimport { noop } from 'lodash';\nimport { uniqueId } from 'lodash/fp';\nimport { Horizontal } from 'mui';\nimport React, { useCallback } from 'react';\n\nexport type DynamicKeyValueListItem = {\n  id: string;\n  field1: TextFieldProps;\n  field2: TextFieldProps;\n};\n\nexport type DynamicKeyValueListProps = {\n  title?: string;\n  name?: string;\n  value?: DynamicKeyValueListItem[];\n  onChange?: SimpleFormControlChange<DynamicKeyValueListItem[]>;\n};\n\n// Utils\nexport const uniqueIdKeyValueItem = () => uniqueId('synonym-item');\n\n// JSX\nexport const DynamicKeyValueList = ({\n  name = '',\n  title = '',\n  onChange = noop,\n  value = [],\n}: DynamicKeyValueListProps) => {\n  const handleClickAdd = useCallback(() => {\n    onChange(name, [\n      ...value,\n      {\n        field1: {\n          ...(value[0].field1 as TextFieldProps),\n          value: '',\n        },\n        field2: {\n          ...(value[0].field2 as TextFieldProps),\n          value: '',\n        },\n        id: uniqueIdKeyValueItem(),\n      },\n    ]);\n  }, [name, onChange, value]);\n\n  const handleClickDelete = useCallback(\n    (id: string) => () => {\n      onChange(name, filterOutWithId<DynamicKeyValueListItem>(id)(value));\n    },\n    [name, onChange, value]\n  );\n\n  const handleChangeInput = useCallback<\n    (id: string) => TextFieldProps['onChange']\n  >(\n    (id) =>\n      ({ target: { value: $value, name: $name } }) => {\n        const itemToUpdate = findById<DynamicKeyValueListItem>(id)(value);\n        if (itemToUpdate) {\n          const updatedItems =\n            updateItemWithMatchingId<DynamicKeyValueListItem>({\n              ...itemToUpdate,\n              [$name]: {\n                ...itemToUpdate[$name as 'field1' | 'field2'],\n                value: $value,\n              },\n            })(value);\n          onChange(name, updatedItems);\n        }\n      },\n    [name, onChange, value]\n  );\n\n  return (\n    <Box display=\"flex\" gap={1} flexDirection=\"column\">\n      <Typography variant=\"h6\">{title}</Typography>\n      <Box display=\"flex\" gap={2} flexDirection=\"column\">\n        {value.map((item, index) => (\n          <Horizontal gap={2} alignItems=\"center\" key={item.id}>\n            <TextField\n              fullWidth\n              name=\"field1\"\n              onChange={handleChangeInput(item.id)}\n              {...item.field1}\n            />\n            <TextField\n              fullWidth\n              onChange={handleChangeInput(item.id)}\n              name=\"field2\"\n              {...item.field2}\n            />\n            {index === 0 ? (\n              <Box>\n                <IconButton\n                  aria-label=\"add synonym\"\n                  color=\"primary\"\n                  size=\"small\"\n                  onClick={handleClickAdd}\n                >\n                  <Add />\n                </IconButton>\n              </Box>\n            ) : (\n              <Box>\n                <IconButton\n                  aria-label=\"delete synonym\"\n                  color=\"warning\"\n                  size=\"small\"\n                  onClick={handleClickDelete(item.id)}\n                >\n                  <Delete />\n                </IconButton>\n              </Box>\n            )}\n          </Horizontal>\n        ))}\n      </Box>\n    </Box>\n  );\n};\n"]}